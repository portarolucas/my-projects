{"version":3,"sources":["webpack:///./src/views/Authentication/Signin.vue","webpack:///./src/views/Authentication/Signin.vue?63b9","webpack:///./src/assets/img/pages/signin/BG/background.jpg","webpack:///./src/assets/css/pages/signin/main.css?96d0"],"names":["class","type","style","login","action","email","required","placeholder","password","askForgotPassword","to","open_modal_signup","name","data","rememberMe","numberAttempts","methods","window","mitt","emit","api","post","this","then","response","$store","commit","user","token_xsrf","defaults","headers","common","$router","push","catch","error","alert","message_status","watch","val","created","state","remember_email","remember_password","render","__scopeId","module","exports"],"mappings":"sNAEaA,MAAM,a,GAENA,MAAM,e,EACT,eAAkB,UAAd,aAAS,G,EAGb,eAAgE,UAAxDC,KAAK,SAASD,MAAM,gBAAe,gBAAY,G,EACvD,eAAI,mB,iBACmE,wC,4GAT/E,eAcM,OAdDA,MAAM,eAAgBE,MAAK,2BAAkC,EAAQ,QAAD,M,CACvE,eAYU,UAZV,EAYU,CAXR,eAUO,QAVA,SAAM,8CAAU,EAAAC,OAAA,EAAAA,MAAA,qBAAK,cAAEC,OAAO,I,CACnC,eAQM,MARN,EAQM,CAPJ,E,eACA,eAA0E,S,qDAA1D,EAAAC,MAAK,IAAEC,SAAA,GAASL,KAAK,QAAQM,YAAY,gB,mBAAzC,EAAAF,S,eAChB,eAAgF,S,qDAAhE,EAAAG,SAAQ,IAAEF,SAAA,GAASL,KAAK,WAAWM,YAAY,gB,mBAA/C,EAAAC,YAChB,EACA,EACmB,EAAAC,mB,iBAAnB,eAAyH,G,MAAlFC,GAAI,yB,YAA4B,iBAAoC,C,mCAC3G,eAAyG,KAArG,QAAK,8CAAe,EAAAC,mBAAA,EAAAA,kBAAA,qBAAiB,qBAAET,MAAA,oBAAyB,wC,aAShE,GACZU,KAAM,SACNC,KAFY,WAGV,MAAO,CACLR,MAAQ,GACRG,SAAW,GACXM,YAAa,EACbC,eAAiB,EACjBN,mBAAoB,IAGxBO,QAAQ,CACNL,kBADM,WAEJM,OAAOC,KAAKC,KAAK,sBAEnBhB,MAJM,WAIC,WACLiB,IAAIC,KAAK,UAAW,CAClB,MAAUC,KAAKjB,MACf,SAAaiB,KAAKd,WACjBe,MAAK,SAAAC,GACN,EAAKC,OAAOC,OAAO,UAAWF,EAASX,KAAKc,MAC5C,EAAKF,OAAOC,OAAO,eAAgBF,EAASX,KAAKe,YACjD,EAAKH,OAAOC,OAAO,wBAAwB,GAC3CN,IAAIS,SAASC,QAAQC,OAAO,gBAAkBP,EAASX,KAAKe,WACzD,EAAKd,YACN,EAAKW,OAAOC,OAAO,yBAA0B,CAAC,MAAU,EAAKrB,MAAO,SAAa,EAAKG,WAExFS,OAAOC,KAAKC,KAAK,aAEjB,EAAKa,QAAQC,KAAK,QACjBC,OAAM,SAAAC,GACJA,EAAMX,UACPY,MAAM,+BAAiCD,EAAMX,SAASX,KAAKwB,gBAC3D,EAAKtB,iBACF,EAAKA,gBAAkB,IACxB,EAAKN,mBAAoB,EACzB,EAAKgB,OAAOC,OAAO,wBAAwB,KAG7CU,MAAM,0KAKdE,MAAO,CACLxB,WAAY,SAASyB,IACR,IAARA,GAAejB,KAAKG,OAAOC,OAAO,qBAGzCc,QAjDY,WAkDPlB,KAAKG,OAAOgB,MAAMC,iBACnBpB,KAAKjB,MAAQiB,KAAKG,OAAOgB,MAAMC,eAC/BpB,KAAKd,SAAWc,KAAKG,OAAOgB,MAAME,kBAClCrB,KAAKb,kBAAoBa,KAAKG,OAAOgB,MAAMhC,qB,UCpEjD,EAAOmC,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,4CCRfC,EAAOC,QAAU,IAA0B,+B,kCCA3C","file":"js/chunk-9785a23a.46c5988d.js","sourcesContent":["<template>\n  <div class=\"main-content\" :style=\"{ 'background-image' : 'url(' + require('@/assets/img/pages/signin/BG/background.jpg') + ')'}\">\n    <section class=\"section_1\">\n      <form @submit.prevent=\"login\" action=\"\">\n        <div class=\"block-login\">\n          <h1>Connexion</h1>\n          <input v-model=\"email\" required type=\"email\" placeholder=\"Adresse mail\" />\n          <input v-model=\"password\" required type=\"password\" placeholder=\"Mot de passe\" />\n          <button type=\"submit\" class=\"se-connecter\">Se connecter</button>\n          <hr>\n          <router-link v-if=\"askForgotPassword\" :to=\"{ name: 'ForgotPassword' }\">Vous avez oublié votre mot de passe?</router-link>\n          <a @click.prevent.stop=\"open_modal_signup\" style=\"cursor: pointer;\">Pas encore de compte ? s'inscrire</a>\n        </div>\n      </form>\n    </section>\n  </div>\n</template>\n\n<script>\n\nexport default{\n  name: 'Signin',\n  data() {\n    return {\n      email : '',\n      password : '',\n      rememberMe : true,\n      numberAttempts : 0,\n      askForgotPassword : false\n    }\n  },\n  methods:{\n    open_modal_signup(){\n      window.mitt.emit('open_modal_signup')\n    },\n    login(){\n      api.post('/signin', {\n        'email' : this.email,\n        'password' : this.password\n      }).then(response => {\n        this.$store.commit('setUser', response.data.user)\n        this.$store.commit('setUserToken', response.data.token_xsrf)\n        this.$store.commit('setAskForgotPassword', false)\n        api.defaults.headers.common['X-XSRF-TOKEN'] = response.data.token_xsrf\n        if(this.rememberMe){\n          this.$store.commit('setRememberCredentials', {'email' : this.email, 'password' : this.password})\n        }\n        window.mitt.emit(\"connected\")\n\n        this.$router.push('/')\n      }).catch(error => {\n        if(error.response){\n          alert('Impossible de se connecter. ' + error.response.data.message_status)\n          this.numberAttempts++\n          if(this.numberAttempts >= 5){\n            this.askForgotPassword = true\n            this.$store.commit('setAskForgotPassword', true)\n          }\n        }else{\n          alert(\"Impossible de se connecter une erreur inconnue s'est produite. Veuillez actualiser la page et si le problème persiste contacter l'administrateur de l'application\")\n        }\n      })\n    }\n  },\n  watch: {\n    rememberMe: function(val){\n      if(val === false) this.$store.commit('notRememberUser')\n    }\n  },\n  created(){\n    if(this.$store.state.remember_email){\n      this.email = this.$store.state.remember_email\n      this.password = this.$store.state.remember_password\n      this.askForgotPassword = this.$store.state.askForgotPassword\n    }\n  }\n}\n</script>\n<style scoped src=\"@/assets/css/pages/signin/main.css\"></style>\n","import { render } from \"./Signin.vue?vue&type=template&id=75b4fca4&scoped=true\"\nimport script from \"./Signin.vue?vue&type=script&lang=js\"\nexport * from \"./Signin.vue?vue&type=script&lang=js\"\n\nimport \"@/assets/css/pages/signin/main.css?vue&type=style&index=0&id=75b4fca4&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-75b4fca4\"\n\nexport default script","module.exports = __webpack_public_path__ + \"img/background.6037fb9c.jpg\";","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./main.css?vue&type=style&index=0&id=75b4fca4&scoped=true&lang=css\""],"sourceRoot":""}